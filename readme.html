<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>lmr-?-websites</title>
<!-- 2018-11-03 Sat 15:53 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="kmarschke" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">lmr-?-websites</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Ellem Website Development Standards</a>
<ul>
<li><a href="#sec-1-1">1.1. Termonology</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Developing</a>
<ul>
<li><a href="#sec-2-1">2.1. File structure</a></li>
<li><a href="#sec-2-2">2.2. Distributed Testing Policy</a></li>
</ul>
</li>
<li><a href="#sec-3">3. Technology</a>
<ul>
<li><a href="#sec-3-1">3.1. Webservers</a></li>
<li><a href="#sec-3-2">3.2. Backend Programming</a></li>
<li><a href="#sec-3-3">3.3. Frontend Programming</a>
<ul>
<li><a href="#sec-3-3-1">3.3.1. Frontend file code flow</a></li>
</ul>
</li>
<li><a href="#sec-3-4">3.4. PHP Portability Policy</a></li>
<li><a href="#sec-3-5">3.5. HTTP Aprication Policy</a></li>
</ul>
</li>
<li><a href="#sec-4">4. Attachments</a>
<ul>
<li><a href="#sec-4-1">4.1. Script for setting up nginx/php-fcgi</a></li>
<li><a href="#sec-4-2">4.2. How to install a website</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Ellem Website Development Standards</h2>
<div class="outline-text-2" id="text-1">
<p>
To speed the proccess of desiding what tools to use the the infantly
deep toolbox, this requestition will specify the practices for
creating, maintaing, testing, and publishing websites.
</p>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Termonology</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li><b>webserver</b> - An HTTP server
</li>
<li><b>webpage</b> - a page sent by the webserver to ultimatly be rednered
in a browser.
</li>
<li><b>website</b> - a series of webpages located under one domain
</li>
<li><b>Backend</b> - anything relating to the webserver proccessing
</li>
<li><b>Frontend</b> - anything relating to the end-user browser proccessing
</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Developing</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> File structure</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Under the root directory will be directories <code>lib/</code>, <code>htdocs/</code>, and 
<code>run/</code>. Also under the root will contain any build materials that
assist in installing the website (makefiles, configs, m4s, ect).
</p>

<p>
<code>lib/</code> is exclusivly library (non executable) php code. When included 
into other scripts, the files inside <code>lib/</code> do nothing but define 
functions and variables.
</p>

<p>
<code>htdocs/</code> will be the root <i>document</i> directory of the requestable 
website files. In other words, this will contain files such as 
<code>index.php</code>, <code>style.css</code>, <code>aboutus.php</code> and <code>help/faq.php</code>.
</p>

<p>
<code>run/</code> is exclusivly executable php code, code that runs when the file
is included. A popular instance of this is <code>header.php</code> and
<code>footer.php</code>.
</p>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Distributed Testing Policy</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Each indvidual will have a copy of the website as well as the
webserver on their machine to develop with. This will prevent needless
allocation of hardware when all of the software needed is only free,
easy to install, and lightweight.
</p>

<p>
All developers need install <b>dnsmasq</b> and implment that all domains
under <code>.localhost</code> will be redirected to localhost. Note, in the
recent versions of Linux Mint, this is pre-installed While developing
www.ellem.ai, you can test it by accessing <i>www.ellem.ai.localhost</i>.
Thus, the devs' webserver's configuration must prepare for these
virtual hosts while testing.
</p>
</div>
</div>
</div>


<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Technology</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Webservers</h3>
<div class="outline-text-3" id="text-3-1">
<p>
The perfered webserver at Ellem will be NGINX, latest stable version.
</p>

<p>
For configuring, it's best to stick with default settings as much
as possible. This excludes variable confuation such as SSL,
domain names, ect.
</p>

<p>
The website code itself must not depend on the webserver. The website
code must be easily (if not flawlessly) portable to NGINX, APACHE,
and IIS.
</p>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Backend Programming</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Ther perfered backend programming language at Ellem is PHP, latest
stable version.
</p>

<p>
Nginx relies on php-fcgi package to properly integrate. Thus this
version of php is default.
</p>

<p>
Heavily recycled PHP should be done properly in the GNU/Linux/Debian
Enviroment, such as maintaining .deb files containing the commonly
used code, storing commonly used PHP code in <code>/usr/share/php/</code>, or
actually writing the code into a core PHP module for maximum speed.
</p>

<p>
The preferred backend database at Ellem is MariaDB, latest stable
version. However their are many database engines and what is more
preferred is to select the right engine for the job. MariaDB is
preferred because of its free and powerful toolkit such as
MySQL-Workbench (which works with MariaDB).
</p>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Frontend Programming</h3>
<div class="outline-text-3" id="text-3-3">
<p>
CSS, HTML, and Javascript are not really preferred, but it's our only
option. Thus, recycle as much as possible.
</p>

<p>
Javascript should be kept to an absolute minimum, and should only ever
be used for stylistic and user interface reasons.
</p>

<p>
HTML and CSS must follow the Laz Webprogramming standard.
</p>
</div>

<div id="outline-container-sec-3-3-1" class="outline-4">
<h4 id="sec-3-3-1"><span class="section-number-4">3.3.1</span> Frontend file code flow</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
Any given php file in must be structored like this from top to bottom.
</p>
<ul class="org-ul">
<li><code>&lt;?php</code>
</li>
<li>php <code>run/</code> includes
</li>
<li>php <code>lib/</code> includes
</li>
<li>php code
</li>
<li><code>?&gt;</code>
</li>
<li>css
</li>
<li>html
</li>
<li>javascript
</li>
<li><code>&lt;?php</code>
</li>
<li>php <code>run/</code> includes
</li>
</ul>
<p>
Obviously there are exceptions, such as echoing out variables inside
of the html, or small defining javascript mid-html. Regardless, upon
opening a file, this is what a developer should expect to see and
thus making it easier for him to seek what code he's to work on.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> PHP Portability Policy</h3>
<div class="outline-text-3" id="text-3-4">
<p>
All php files should be written in a sense that they can ran
independantly (assuming all library files have been installed
properly).
</p>

<p>
All php code should be agnostic to what interpreter is being used,
and be switchable between CLI, FPM, and the Apache Module, ect.
</p>
</div>
</div>

<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> HTTP Aprication Policy</h3>
<div class="outline-text-3" id="text-3-5">
<p>
All methods must be used properly. This includes using GET, POST,
PUT, and DELETE for getting a page, posting information, putting and
deleting page content respecfully.
</p>

<p>
AJAX and Lingering Websockets should be avoided in lieu of stateless
HTTP connections.
</p>

<p>
Custom error pages should be avoided. Errors should be returned in the
classic header style (<code>HTTP/1.1 404</code>, <code>HTTP/1.1 500</code>, ect) and should
not include HTML but instead a simple message.
</p>
</div>
</div>
</div>


<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Attachments</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Script for setting up nginx/php-fcgi</h3>
<div class="outline-text-3" id="text-4-1">
<pre class="example">
# Step 1: Install the software, note the password mysql asks you to
# set for step 3.
apt install nginx php-fpm mysql-server

# Step 2: Set php to debug mode
mv /etc/php/7.0/fpm/php.ini /etc/php/7.0/fpm/php.ini-back
cp /usr/lib/php/7.0/php.ini-development /etc/php/7.0/fpm/php.ini

# Step 3: Set the root password for your mysql server to 'd'. This
# need not be secure. Because it's just your computer. Note running
# this command will prompt you for a password, use the password you
# set in step 1.
mysqladmin -u root -p password d
</pre>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> How to install a website</h3>
<div class="outline-text-3" id="text-4-2">
<p>
An ellem website should have the same script to use in order to
install a website onto your computer.
</p>

<p>
This script sequence follows many GNU standards so get used to it.
</p>

<pre class="example">
# Configure the makefile. Note this is a file that is in the project
# direcory. So make sure you're cd'd in there when running these
# commands.
./configure

# Run make install (may require sudo). make install will compile any
# files that need to be compiled, and install some files into your
# computer that are nessacary for the website to work.
make install

# Reload nginx
nginx -s reload
</pre>

<p>
Remeber, as stated in <a href="#sec-2-2">2.2</a>, if your developing
for a website www.ellem.ai, you can access your local copy at
www.ellem.ai.localhost.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: kmarschke</p>
<p class="date">Created: 2018-11-03 Sat 15:53</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
